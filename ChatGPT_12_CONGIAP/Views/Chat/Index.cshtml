@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<body>
    <h1>User List</h1>
    <button id="loadUsers">Load Users</button>
    <table border="1" id="userTable">
        <thead>
            <tr>
                <th>User ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Group ID</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        $(document).ready(function () {
            $("#loadUsers").click(function () {
                $.ajax({
                    url: "http://127.0.0.1:5000/user",
                    type: "GET",
                    success: function (data) {
                        const users = data;
                        const tableBody = $("#userTable tbody");
                        tableBody.empty(); // Xóa dữ liệu cũ trong bảng

                        users.forEach(user => {
                            const row = `
                                <tr>
                                    <td>${user.user_id}</td>
                                    <td>${user.name || "N/A"}</td>
                                    <td>${user.email || "N/A"}</td>
                                    <td>${user.group_id}</td>
                                </tr>
                            `;
                            tableBody.append(row);
                        });
                    },
                    error: function (xhr, status, error) {
                        console.error("Error fetching user data:", error);
                    }
                });
            });
        });
    </script>
</body>